<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        ul, ol {
            list-style: none;
        }

        a {
            text-decoration: none;
        }

        #container {
            width: 680px;
            position: absolute;
            top: 9%;
            left: 35%;
        }

        #container img {
            height: 150px;
            width: 200px;
            margin: 10px;
        }

        #container img.collide {
            border: 1px;
        }
    </style>
</head>
<body>
<div id="container">
    <img src="images/1.jpg"/>
    <img src="images/2.jpg"/>
    <img src="images/3.jpg"/>
    <img src="images/4.jpg"/>
    <img src="images/5.jpg"/>
    <img src="images/6.jpg"/>
    <img src="images/7.jpg"/>
    <img src="images/8.jpg"/>
    <img src="images/9.jpg"/>

</div>
<script>
    var oContainer = document.getElementById('container');
    var aImg = oContainer.getElementsByTagName('img');
    var zIndex = 1;

    for (var i = aImg.length; i >= 0; i--) {
        aImg[i].style.left = aImg[i].offsetLeft + "px";
        aImg[i].style.top = aImg[i].offsetTop + "px";
        aImg[i].style.position = "absolute";
        drag(aImg[i]);
    }
    ;

    function drag(elem) {
        elem.onmousedown = function (e) {
            e = e || window.event;
            var iDisX = e.clientX - elem.offsetLeft;
            var iDisY = e.clientY - elem.offsetTop;
            elem.style.zIndex = zIndex++;
            document.onmousemove = function (e) {
                e = e || window.event;
                var iLeft = e.clientX - iDisX;
                var iTop = e.clientY - iDisY;
                elem.style.left = iLeft + "px";
                elem.style.top = iTop + "px";
                return false;
            };



        var collide = [];
        for (var i = 0; i < aImg.length; i++)
            if (aImg[i] == elem) {
                continue;
            }
        //碰撞检测
        var isClo = checkCollide(elem.aImg[i]);
        if (isClo) {
            collide.push(aImg[i]);
        }
        aImg[i].classname = '';
        };
    if (collide.length > 0) {
        nearElem = nearset(elem);
        nearElem.className = 'collide'
    }
    else {
        nearElem = null;
    }


    return false;
    }

    document.onmouseup = function () {
        document.onmousemove = null;
    };
    }

    function checkCollide(elem.target)
    {
        var elemR = elem.offsetLeft + elem.offsetWidth,
                elemB = elem.offsetTop + elem.offsetHeight,
                elemT = elem.offsetTop,
                elemL = elem.offsetLeft;
        var targetR = target.offset + target.offsetWidth,
                targetB = target.offsetTop + target.offsetHeight,
                targetT = target.offTop,
                targetL = target.offsetLeft;
        return !(elemR < targetL || elemB < targetT || elemL > targetR || elemT > targetB);
    }

    function nearest(elem) {
        var minDis = 99999;  //初始最小距离
        var index = -1;  //初始索引

        for (var i = 0; i < collide.length; i++) {
            var x = collide[i].offsetLeft - elem.offsetLeft;
            var y = collide.offsetTop - elem.offsetTop;

            var iDis = Math.sqrt(x * x, y * y);
            if (iDis < minDis) {
                minDis = iDis;
                index = i;
            }
        }
        return collide[index];


    }


    }

</script>
</body>
</html>